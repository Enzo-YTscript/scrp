local ArrayField = loadstring(game:HttpGet("https://raw.githubusercontent.com/Enzo-YTscript/Ui-Library/main/ArrayfieldLibraryUI"))()

local Window = ArrayField:CreateWindow({
    Name = "Sword Legends",
    LoadingTitle = "SUBSCRIBE ENZO-YT",
    LoadingSubtitle = "by ENZO-YT",
    ConfigurationSaving = {
        Enabled = false,
        FolderName = nil,
        FileName = "Enzo-YT Script"
    },
    Discord = {
        Enabled = false,
        Invite = "noinvitelink",
        RememberJoins = true
    },
    KeySystem = false,
    KeySettings = {
        Title = "Sword Legends",
        Subtitle = "Key System",
        Note = "Key In Description",
        FileName = "NinjaLegendsKeyEnzoYT",
        SaveKey = false,
        GrabKeyFromSite = true,
        Key = {"https://pastebin.com/raw/iJCXgQGb"},
        Actions = {
            [1] = {
                Text = 'Click here to copy the key link',
                OnPress = function()
                end,
            }
        },
    }
})

-- Anti Afk
local vu = game:GetService("VirtualUser")
game:GetService("Players").LocalPlayer.Idled:connect(function()
    vu:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    wait(1)
    vu:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
end)
	
--- MAIN TAB	
    local TabMain = Window:CreateTab("HOME", nil) -- Title, Image
	local SectionMain = TabMain:CreateSection("Farm",false)
	
---- autoClick Fungtions
getgenv().AutoClick = false

local function autoClick()
    while getgenv().AutoClick do
        local args = {
            [1] = "Click"
        }
        game:GetService("ReplicatedStorage").Knit.Services.ClickService.RE.ClickRemote:FireServer(unpack(args))
        print("ClickRemote fired")
        wait(0.1) -- Interval waktu antara klik (dalam detik, sesuaikan dengan kebutuhan)
    end
end


	local AutoClick = TabMain:CreateToggle({
    Name = "Auto Click",
	SectionParent = SectionMain,
    CurrentValue = false,
    Callback = function(Value)
        getgenv().AutoClick = Value
        print("Auto Click toggled:", Value)
        if Value then
            autoClick()
        end
    end
})

-- Tabel pemetaan nama asli ke nama yang ditampilkan
local enemyNameMap = {
    ["70"] = "Goblin",
    ["80"] = "Orc",
    ["90"] = "Troll",
    -- Tambahkan pemetaan lainnya di sini
}

-- Fungsi untuk mendapatkan daftar nama musuh yang ditampilkan
local function getDisplayedEnemiesList()
    local enemies = {}
    for _, enemy in pairs(workspace.Enemies:GetChildren()) do
        if enemyNameMap[enemy.Name] then
            table.insert(enemies, enemyNameMap[enemy.Name])
        else
            table.insert(enemies, enemy.Name)
        end
    end
    return enemies
end

-- Inisialisasi dropdown dengan daftar musuh yang ditampilkan
local enemyDropdown
local function createEnemyDropdown()
    enemyDropdown = EggTab:CreateDropdown({
        Name = "Select Enemy",
        Options = getDisplayedEnemiesList(),
        CurrentOption = "None",
        Callback = function(option)
            -- Cari nama asli berdasarkan nama yang ditampilkan
            for originalName, displayName in pairs(enemyNameMap) do
                if displayName == option then
                    getgenv().selectedEnemy = originalName
                    break
                end
            end
            print("Enemy selected:", getgenv().selectedEnemy) -- Debug print statement
        end
    })
end

createEnemyDropdown()

-- Inisialisasi variabel global untuk auto attack
getgenv().AutoAttack = false
getgenv().selectedEnemy = "None"

-- Fungsi untuk auto attack
local function autoAttack()
    while getgenv().AutoAttack do
        if getgenv().selectedEnemy and getgenv().selectedEnemy ~= "None" then
            local enemyModel = workspace.Enemies:FindFirstChild(getgenv().selectedEnemy)
            if enemyModel then
                local args = {
                    [1] = "BasicClick",
                    [2] = {
                        ["NPCModel"] = enemyModel
                    }
                }
                game:GetService("ReplicatedStorage").Knit.Services.ClickService.RE.ClickRemote:FireServer(unpack(args))
                print("Attacking enemy:", getgenv().selectedEnemy) -- Debug print statement
            else
                print("Enemy not found:", getgenv().selectedEnemy) -- Debug print statement
            end
        else
            print("No enemy selected") -- Debug print statement
        end
        wait(0.5) -- Interval waktu antara serangan (dalam detik, sesuaikan dengan kebutuhan)
    end
end

-- Menambahkan toggle untuk auto attack ke UI
local AutoAttackToggle = EggTab:CreateToggle({
    Name = "Auto Attack Enemy",
    CurrentValue = false,
    Callback = function(Value)
        getgenv().AutoAttack = Value
        print("Auto Attack toggled:", Value) -- Debug print statement
        if Value then
            autoAttack()
        end
    end
})

-- Inisialisasi variabel global untuk auto collect coin
getgenv().AutoCollectCoin = false

-- Fungsi untuk auto collect coin
local function autoCollectCoin()
    while getgenv().AutoCollectCoin do
        for _, dropModel in pairs(workspace.Enemies.DropModels:GetChildren()) do
            if dropModel:IsA("Model") and dropModel:FindFirstChild("Id") then
                local args = {
                    [1] = "Collected",
                    [2] = {
                        ["Id"] = dropModel.Id.Value
                    }
                }
                game:GetService("ReplicatedStorage").Knit.Services.GameService.RE.GameRemote:FireServer(unpack(args))
                print("Collecting coin with Id:", dropModel.Id.Value) -- Debug print statement
            end
        end
        wait(1) -- Interval waktu antara setiap iterasi pengumpulan koin (dalam detik, sesuaikan dengan kebutuhan)
    end
end

-- Menambahkan toggle untuk auto collect coin ke UI
local AutoCollectCoinToggle = EggTab:CreateToggle({
    Name = "Auto Collect Coin",
    CurrentValue = false,
    Callback = function(Value)
        getgenv().AutoCollectCoin = Value
        print("Auto Collect Coin toggled:", Value) -- Debug print statement
        if Value then
            autoCollectCoin()
        end
    end
})
